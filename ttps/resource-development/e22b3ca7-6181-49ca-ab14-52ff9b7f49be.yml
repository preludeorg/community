id: e22b3ca7-6181-49ca-ab14-52ff9b7f49be
metadata:
  authors:
  - privateducky
  payloads:
    headless: 48edbbb38d51c6c68a52ca9049553f4de6bc272d
name: Install Headless Operator
description: |
  The Operator C2 can be run without a UI component. This allows deploying it as an API-only C2 on any Linux server.
tactic: resource-development
technique:
  id: T1583
  name: Acquire Infrastructure
platforms:
  linux:
    sh:
      command: |
        mkdir -p /tmp/headless && 
        curl "#{payload.url}" > /tmp/headless/bin && 
        chmod +x /tmp/headless/bin && 
        nohup sudo /tmp/headless/bin --sessionToken '#{operator.session}' --accountEmail '#{operator.login.email}' --accountToken '#{operator.login.token}' --accountSecret '#{operator.login.secret}' >/tmp/headless/headless.log 2>&1  &
      payload: headless
      variants:
        - command: |
            curl -s https://packagecloud.io/install/repositories/immortal/immortal/script.deb.sh | sudo bash
            sudo apt install immortal
            mkdir -p ~/.local/share/Headless && 
            curl "#{payload.url}" > ~/.local/share/Headless/headless && 
            chmod +x ~/.local/share/Headless/headless && 
            immortal -l ~/.local/share/Headless/headless.log /bin/sh -c "sudo ~/.local/share/Headless/headless --sessionToken '#{operator.session}' --accountEmail '#{operator.login.email}' --accountToken '#{operator.login.token}' --accountSecret '#{operator.login.secret}'"
          payload: headless