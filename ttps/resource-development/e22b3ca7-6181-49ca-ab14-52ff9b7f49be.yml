id: e22b3ca7-6181-49ca-ab14-52ff9b7f49be
metadata:
  authors:
  - privateducky
  payloads:
    headless: 504784e3f4da15dccb0249e5f1ef3583a8ff2273
name: Install Headless Operator
description: |
  The Operator C2 can be run without a UI component. This allows deploying it as an API-only C2 on any Linux server.
tactic: resource-development
technique:
  id: T1583
  name: Acquire Infrastructure
platforms:
  linux:
    sh:
      command: |
        mkdir -p /tmp/headless &&
        curl "#{payload.url}" > /tmp/headless/bin &&
        chmod +x /tmp/headless/bin &&
        nohup sudo /tmp/headless/bin --sessionToken '#{operator.session}' --accountEmail '#{operator.login.email}' --accountToken '#{operator.login.token}' --accountSecret '#{operator.login.secret}' >/tmp/headless/headless.log 2>&1  &
      payload: headless
      variants:
        - command: |
            curl -s https://packagecloud.io/install/repositories/immortal/immortal/script.deb.sh | sudo bash &&
            sudo apt install immortal &&
            mkdir -p /home/ubuntu/.local/share/Headless &&
            curl "#{payload.url}" > /home/ubuntu/.local/share/Headless/headless &&
            chmod +x /home/ubuntu/.local/share/Headless/headless &&
            immortal -l /home/ubuntu/.local/share/Headless/headless.log /bin/sh -c "sudo /home/ubuntu/.local/share/Headless/headless --sessionToken '#{operator.session}' --accountEmail '#{operator.login.email}' --accountToken '#{operator.login.token}' --accountSecret '#{operator.login.secret}'"
          payload: headless
